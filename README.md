EasyShopJS
===

EasyShopJS - это небольшая JavaScript библиотека, позволяющая реализовать корзину интернет-магазина на своём сайте в считанные минуты. Для начала работы необходимо скачать файл `easy-shop.js`, подключить его через стандартный тег `<script>` в конце документа и добавить определённые классы к своим элементам страницы.

При формировании HTML-кода страницы, библиотека инициализируется на элементах класса `e-shop-card`, что будет означать для неё - карточку каждого товара. Внутри карточки товара обязательно наличие четырёх классов, а именно `e-shop-title` - название товара, `e-shop-image` - изображение товара из тега `<img>` и атрибута `src`, `e-shop-price` - цена товара и `e-shop-add` - кнопка "добавить в корзину". Повторное нажатие на кнопку "добавить" увеличивает количество товара на 1.

### Пример вёрстки карточки товара:

  ```html
  <div class="e-shop-card">
    <img class="e-shop-image" src="./img/iphone-7.jpg">
    <span class="e-shop-title">iPhone 7 белый</span>
    <span class="e-shop-price">328,16 руб.</span>
    <a class="e-shop-add" href="#">
  </div>
  ```

Из примера вёртки выше, будет создан товар с названием "iPhone 7 белый", ценой 328,16 и изображением "./img/iphone-7.jpg". Когда происходит нажатие на тег с классом `e-shop-add`, стандартное поведение браузера отменяется и переход по ссылке не происходит.

Данные классы могут использоваться на любых тегах, внутри названия товара и цены могут присутствовать другие html-теги, библиотека знает как их игнорировать. Записанной ценой в памяти останется число без знаков валюты или слова `руб.` с разделителем через точку. Если какой-то из классов вышел за пределы `e-shop-card`, то он будет игнорироваться.

### Отображение корзины товаров:

В виду популярности "Заказа на одной странице", отображение корзины товаров в библиотеке реализовано с помощью добавления класса `e-shop-cart` к тегу `<form>` на любой странице сайта, где пользователь завершает совершение покупки. После загрузки страницы, библиотека ищет данный класс на формах и проверяет, есть ли в корзине товары. Если нет, то выводит только надпись о том, что корзина пуста, иначе инициализирует загрузку товаров и формирование html-таблицы товаров с их изображением, названием, количеством в корзине, кнопками `плюс` \ `минус`, стоимостью выбранного количества каждого товара, кнопкой "удалить товар" и подсчётом итоговой стоимости товаров.

Так как потребности в данных пользователей каждого магазина могут отличаться друг от друга, после добавления класса `e-shop-cart` к тегу `<form>` на нужной странице, необходимо добавить нужные поля так же, как обычно создаётся форма с указанием метода, файла/функции-обработчика и добавлением кнопки "отправить".

### Пример корзины товаров:

  ```html
  <form class="e-shop-cart" method="POST" action="./send-mail.php">
    <fieldset class="some-custom-inputs">
      <label>You're name
        <input name="name" type="text">
      </label>

      <label>You're phone
        <input name="phone" type="text">
      </label>

      <label>You're email
        <input name="email" type="text">
      </label>

      <input type="submit" value="Submit">
    </fieldset>
  </form>
  ```

Стоит ещё раз обратить внимание, что товары добавятся автоматически в начало таблицы, а внутрь мы добавляем только те поля, в которых мы хотим получить данные от пользователя. Данные таблицы следует обрабатывать как простое событие `submit`. После отправки формы, корзина покупателя очищается.

Данные о товарах будут находиться в скрытом теге `<input type="hidden" name="cart-json-data" class="cart-json">` в виде JSON-строки. Обработка этой строки на сервере производится стандартными функциями для работы с JSON-форматом, например, в PHP:

  ```php
  <?php
  $data_json = $_POST['cart-json-data'];
  $data_json = json_decode($data_json, true);
  $order_html = "<table><tbody>";
  $order_total_price = 0;

  foreach($data_json as $good) {
    $order_html .= "
    <tr>
      <td>Название товара: </td>
      <td>{$good["title"]}</td>
    </tr>
    <tr>
      <td>Количество: </td>
      <td>{$good["amount"]}</td>
    </tr>
    <tr>
      <td>Стоимость: </td>
      <td>" . ($good['price'] * $good['amount']) . "</td>
    </tr>
    ";
    $order_total_price += ($good['price'] * $good['amount']);
  }

  $order_html .= "
    <tr>
      <td>Итого: </td>
      <td>{$order_total_price}</td>
    </tr>
  ";

  $order_html .= "</tbody></table>";
  ?>
  ```

После выполнения данного скрипта, мы получим заполненную таблицу в виде строки со всеми товарами, что заказал пользователь.

Стоит обратить внимание на те поля json-объекта, которые затрагиваются:
- title - название товара
- amount - количество в корзине
- price - цена 1 товара

### Полный список зарезервированных классов:

1. .e-shop-card – карточка товара, внутри которой его картинка, название, цена и кнопка «добавить»;
2. .e-shop-title – название товара (наличие html-тегов внутри названия – допустимо);
3. .e-shop-image – изображение товара, это теге img, библиотека забирает ссылку на изображение из атрибута src;
4. .e-shop-price – цена товара, допустимы дробные значения (например -  99,90), разделение через точку или запятую, наличие внутри тега слова «руб.» или знака валюты – допустимо;
5. .e-shop-add – кнопка «добавить товар», может находиться на любом теге, отменяет стандартное поведение браузера(переход по ссылке или т.п.), но добавляет товар в корзину. Повторное нажатие увеличивает кол-во товара в корзине на +1;
6. .e-shop-incart – тег, внутрь которого будет подставляться количество товаров в корзине в таком формате: «(4)» без кавычек. Если корзина пустая, то содержание тега тоже пустое (не обязательный класс).

### Пример работы библиотеки
Вы можете посмотреть, как ведёт себя библиотека на простой вёрстке по ссылке:
http://dev.snm-studio.ru

Так же, все настроенные скрипты обработки формы и рабочий шаблон вы можете скачать из данного репозитория или по ссылке:
http://dev.snm-studio.ru/EasyShopJS.zip

О всех замечаниях или пожеланиях, прошу сообщать по почте sergei.kundryukov1989@gmail.com